<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd">
	<error-handler name="errorHandlingError_Handler" doc:id="0e163ef3-ff71-49a0-b435-500c0a401655" >
 <on-error-propagate type="APIKIT:BAD_REQUEST">
                <ee:transform xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd" doc:id="6bfa6305-b334-4982-a85d-5afcff4482b3">
                    <ee:message>
                        <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Bad request"}]]></ee:set-payload>
                    </ee:message>
                    <ee:variables>
                        <ee:set-variable variableName="httpStatus"><![CDATA[400]]></ee:set-variable>
                    </ee:variables>
                </ee:transform>
				<flow-ref doc:name="Flow Reference" doc:id="89eb3f64-2def-4eeb-844a-abb6c6d06d4e" name="interface-order-db-apiFlow-error"/>
            </on-error-propagate>
            <on-error-propagate type="APIKIT:NOT_FOUND">
                <ee:transform xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd" doc:id="a3593035-6120-4612-a540-7b3a046a4baa">
                    <ee:message>
                        <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Resource not found"}]]></ee:set-payload>
                    </ee:message>
                    <ee:variables>
                        <ee:set-variable variableName="httpStatus"><![CDATA[404]]></ee:set-variable>
                    </ee:variables>
                </ee:transform>
				<flow-ref doc:name="Flow Reference" doc:id="8b89991d-6344-41b2-b2d9-97cdd65f8d9d" name="interface-order-db-apiFlow-error"/>
            </on-error-propagate>
            <on-error-propagate type="APIKIT:METHOD_NOT_ALLOWED">
                <ee:transform xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd" doc:id="7c08e6a0-997b-4f48-8c23-6360eff1c29d">
                    <ee:message>
                        <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Method not allowed"}]]></ee:set-payload>
                    </ee:message>
                    <ee:variables>
                        <ee:set-variable variableName="httpStatus"><![CDATA[405]]></ee:set-variable>
                    </ee:variables>
                </ee:transform>
				<flow-ref doc:name="Flow Reference" doc:id="6197dcdc-7b57-45be-a6c8-491083d4c815" name="interface-order-db-apiFlow-error"/>
            </on-error-propagate>
            <on-error-propagate type="APIKIT:NOT_ACCEPTABLE">
                <ee:transform xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
                    <ee:message>
                        <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Not acceptable"}]]></ee:set-payload>
                    </ee:message>
                    <ee:variables>
                        <ee:set-variable variableName="httpStatus">406</ee:set-variable>
                    </ee:variables>
                </ee:transform>
				<flow-ref doc:name="Flow Reference" doc:id="d522f002-c167-436e-a40c-333506025746" name="interface-order-db-apiFlow-error"/>
            </on-error-propagate>
            <on-error-propagate type="APIKIT:UNSUPPORTED_MEDIA_TYPE">
                <ee:transform xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd" doc:id="caba4157-9dc0-4f63-bc91-b1aa050d20f0">
                    <ee:message>
                        <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Unsupported media type"}]]></ee:set-payload>
                    </ee:message>
                    <ee:variables>
                        <ee:set-variable variableName="httpStatus"><![CDATA[415]]></ee:set-variable>
                    </ee:variables>
                </ee:transform>
				<flow-ref doc:name="Flow Reference" doc:id="b6dcdaa9-ea9d-43ee-b8d0-52d2bb1fcf88" name="interface-order-db-apiFlow-error"/>
            </on-error-propagate>
            <on-error-propagate type="APIKIT:NOT_IMPLEMENTED">
                <ee:transform xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd">
                    <ee:message>
                        <ee:set-payload><![CDATA[%dw 2.0
output application/json
---
{message: "Not Implemented"}]]></ee:set-payload>
                    </ee:message>
                    <ee:variables>
                        <ee:set-variable variableName="httpStatus">501</ee:set-variable>
                    </ee:variables>
                </ee:transform>
				<flow-ref doc:name="Flow Reference" doc:id="7b787ba9-8579-460f-9faa-a7a93cf2d3f3" name="interface-order-db-apiFlow-error"/>
            </on-error-propagate>
           
			<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="43243fe3-b32a-4a33-be17-d1f678fcbeb5" type="DB:BAD_SQL_SYNTAX, DB:CONNECTIVITY, DB:QUERY_EXECUTION">
				<flow-ref doc:name="Flow Reference" doc:id="d97eb5fd-b4cf-445d-8505-f0b71b8f9777" name="interface-order-db-apiFlow-error"/>
			</on-error-propagate>
			<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="ae74203e-65c0-4114-94f1-87f9427d1939" type="EXPRESSION, STREAM_MAXIMUM_SIZE_EXCEEDED">
			<flow-ref doc:name="Flow Reference" doc:id="0c239016-4705-45e2-a2c7-19849747b25a" name="interface-order-db-apiFlow-error"/>
		</on-error-propagate>
		<on-error-propagate enableNotifications="true" logException="true" doc:name="On Error Propagate" doc:id="3f028c41-7053-4fa3-8451-789c4fb332b3" type="ANY">
				<flow-ref doc:name="Flow Reference" doc:id="483f7ab3-e4b3-46ba-abdb-6c6d6777d473" name="interface-order-db-apiFlow-error"/>
			</on-error-propagate>
	</error-handler>
		<flow name="interface-order-db-apiFlow-error" doc:id="2db06760-9699-43cf-9b5d-4c874ece74bf" >
		<ee:transform doc:name="Transform Message" doc:id="bc4e4d95-d22b-4c87-94c6-19bc785e11a2" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
{
	timestamp: now(),
	Errorcode:vars.httpStatus,
	errorType:error.errorType,
	message:error.description,
	externalcorrelationid:error.correlationId
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</flow>
	</mule>
